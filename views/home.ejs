<!-- breadcrumb-section -->
<style>
  .pagination {
    display: flex;
    justify-content: center;
    margin-top: 2rem;
  }

  .pagination li {
    margin-right: 0.5rem;
  }

  .pagination a {
    display: block;
    padding: 0.8rem;
    color: #333;
    text-decoration: none;
    border: 1px solid #ccc;
    border-radius: 0.25rem;
    transition: all 0.2s ease-in-out;
  }

  .pagination a:hover {
    background-color: #eee;
  }

  .pagination .page-item.active .page-link {
    background: #F28123;
    color: #fff;
    border-color: #F28123;
  }

  .pagination .disabled a {
    opacity: 0.5;
    pointer-events: none;
  }

  .filter-bar .dropdown button {
    background-color: #F28123;
    color: #fff;
    border: 1px solid #F28123;
    border-radius: 5px;
    padding: 5px 10px;
    transition: all 0.3s ease;
  }



  .filter-sidebar {
    display: flex;
    flex-direction: column;
  }

  .filter-section h4 {
    margin-bottom: 0.5rem;
    font-size: 1rem;
  }

  .filter-section ul {
    list-style: none;
    padding: 0;
  }

  .filter-section li {
    margin-bottom: 0.5rem;
  }

  .filter-section a {
    display: inline-block;
    padding: 0.5rem 1rem;
    background-color: #eee;
    color: #333;
    text-decoration: none;
    border-radius: 4px;
    transition: background-color 0.2s ease;
  }

  .filter-section a.active {
    background-color: #F28123;
    color: #fff;
  }

  .filter-section a:hover:not(.active) {
    background-color: #ccc;
  }
</style>

<div class="breadcrumb-section breadcrumb-bg">
  <div class="container">
    <div class="row">
      <% if (typeof messages !=='undefined' ) { %>
      <% if (messages != '') { %>
      <div class="toast" role="alert" id="errorToast" style="position: absolute; top: 35%; right: 5%;">
        <div class="toast-header">
          <strong class="mr-auto">Notification</strong>
          <button type="button" class="close">
            <span>&times;</span>
          </button>
        </div>

        <div class="toast-body text-left">
          <%= messages %>
        </div>
      </div>
      <% } %>
      <% } %>


      <div class="col-lg-8 offset-lg-2 text-center">
        <div class="breadcrumb-text">
          <p>Univesity Of Greenwich</p>
          <h1>IDEAS</h1>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- end breadcrumb section -->




<!-- latest news -->
<div class="latest-news mt-150 mb-150">
  <div class="container">
    <div class="row">
      <div class="col-md-3">
        <nav class="navbar bg-light">
          <% /* %>
          <!-- <div class="">
            <a href="/"><button class="tablinks <%= typeof filter =='undefined' ? 'active' : '' %>">All Ideas</button></a>
            <a href=""><button class="tablinks">Most Poppular</button></a>
            <a href="/most-viewed/1"><button class="tablinks <%= typeof filter !=='undefined' && filter === 'most-viewed' ? 'active' : '' %>">Most Viewed</button></a>
            <a href="/last-ideas/1"><button class="tablinks <%= typeof filter !=='undefined' && filter === 'last-ideas' ? 'active' : '' %>">Latest Idea</button></a>
            <a href="/last-comments/1"><button class="tablinks <%= typeof filter !=='undefined' && filter === 'last-comments' ? 'active' : '' %>">Latest Comments</button></a>

          </div> -->
          <% */ %>
          <div class="filter-sidebar">
            <div class="filter-section">
              <h4>Sort by</h4>
              <ul>
                <li>
                  <a href="?sortBy=all-ideas&category=<%- category %>&department=<%- department %>" class="<%= sortBy === 'all-ideas' ? 'active' : '' %>">All Ideas</a>
                </li>
                <li>
                  <a href="?sortBy=most-viewed&category=<%- category %>&department=<%- department %>" class="<%= sortBy === 'most-viewed' ? 'active' : '' %>">Most Viewed</a>
                </li>
                <li>
                  <a href="?sortBy=last-ideas&category=<%- category %>&department=<%- department %>" class="<%= sortBy === 'last-ideas' ? 'active' : '' %>">Last Ideas</a>
                </li>
                <li>
                  <a href="?sortBy=last-comments&category=<%- category %>&department=<%- department %>" class="<%= sortBy === 'last-comments' ? 'active' : '' %>">Last Comments</a>
                </li>
              </ul>
            </div>
            <div class="filter-section">
              <h4>Category</h4>
              <ul>
                <li>
                  <a href="?sortBy=<%- sortBy %>&category=all&department=<%- department %>" class="<%= category === 'all' ? 'active' : '' %>">All</a>
                </li>
                <% categories.forEach(cat => { %>
                <li>
                  <a href="?sortBy=<%- sortBy %>&category=<%- cat._id %>&department=<%- department %>" class="<%= category.toString() === cat._id.toString() ? 'active' : '' %>"><%- cat.nameCate %></a>
                </li>
                <% }) %>
              </ul>
            </div>
            <div class="filter-section">
              <h4>Department</h4>
              <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="departmentDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Departments
                </button>
                <div class="dropdown-menu" aria-labelledby="departmentDropdown">
                  <a class="dropdown-item <%= department === 'all' ? 'active' : '' %>" href="?sortBy=<%- sortBy %>&category=<%- category %>&department=all">All Departments</a>
                  <% departments.forEach(dept => { %>
                  <a class="dropdown-item <%= department.toString() === dept._id.toString() ? 'active' : '' %>" href="?sortBy=<%- sortBy %>&category=<%- category %>&department=<%- dept._id %>"><%- dept.name %></a>
                  <% }) %>
                </div>
              </div>
            </div>


          </div>


        </nav>
      </div>

      <div class="col-md-9">
        <div class="row">
          <% for(var i=0; i < ideas.length; i++) { %>
          <div class="col-lg-6 col-md-6">
            <div class="single-latest-news">
              <!-- <a href="single-news.html">
            <div class="latest-news-bg news-bg-1"></div>
          </a> -->
              <a href="/detailIdeas/<%= ideas[i]._id %>">
                <div class="news-text-box">
                  <h3>
                    <%= ideas[i].title %>
                  </h3>
                  <h3></h3>
                  <p class="blog-meta">
                    <span class="author"><i class="fas fa-user"></i>
                      <%= ideas[i].isAnonymous ? 'Unknown' : ideas[i].user %>
                    </span>
                    <span class="date"><i class="fas fa-calendar"></i>
                      <%= formattedList[i].createdDate %>
                    </span>
                  </p>
                  <p class="excerpt">
                    <%= ideas[i].content.substring(0, 50) + "..." %>
                  </p>
                  <a>
                    <i class="far fa-thumbs-up"></i> <%= ideas[i].like %>
                    <i class="far fa-thumbs-down"></i> <%= ideas[i].dislike %>
                    <i class="far fa-comment"></i> <%= ideas[i].commentCount %>
                    <i class="far fa-eye"></i> <%= ideas[i].viewCount %>
                  </a>

                </div>
              </a>
              <a class="read-more-btn" href="/detailIdeas/<%= ideas[i]._id %>">read more <i class="fas fa-angle-right"></i></a>
            </div>
          </div>
          <% } %>

        </div>
      </div>
      <div class="col-md-12">
        <div class="row">
          <nav aria-label="Page navigation" class="mx-auto">
            <ul class="pagination">
              <% if (current > 1) { %>
              <li class="page-item">
                <a class="page-link" href="?page=<%= parseInt(current) - 1 %>&sortBy=<%= sortBy %>&category=<%= category %>&department=<%= department %>" aria-label="Previous">
                  <span aria-hidden="true">&laquo;</span>
                  <span class="sr-only">Previous</span>
                </a>
              </li>
              <% } %>

              <% for (var i = 1; i <= pages; i++) { %>
              <% if (i == current) { %>
              <li class="page-item active"><a class="page-link" href="?page=<%= i %>&sortBy=<%= sortBy %>&category=<%= category %>&department=<%= department %>"><%= i %></a></li>
              <% } else { %>
              <li class="page-item"><a class="page-link" href="?page=<%= i %>&sortBy=<%= sortBy %>&category=<%= category %>&department=<%= department %>"><%= i %></a></li>
              <% } %>
              <% } %>

              <% if (current < pages) { %>
              <li class="page-item">
                <a class="page-link" href="?page=<%= parseInt(current) + 1 %>&sortBy=<%= sortBy %>&category=<%= category %>&department=<%= department %>" aria-label="Next">
                  <span aria-hidden="true">&raquo;</span>
                  <span class="sr-only">Next</span>
                </a>
              </li>
              <% } %>
            </ul>
          </nav>
        </div>
      </div>

    </div>
  </div>
</div>
<!-- end latest news -->

<script>
  document.addEventListener('DOMContentLoaded', function() {
    $('#errorToast').toast({
      delay: 5000
    });

    $('#errorToast').toast("show");
  })
</script>